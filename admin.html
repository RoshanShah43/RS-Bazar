<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RS Bazar Admin Panel</title>
    <link rel="stylesheet" href="admin-styles.css">
</head>
<body>
    <!-- Login Modal -->
    

    <!-- Admin Dashboard -->
    <div id="adminDashboard" class="admin-dashboard hidden">
        <header class="admin-header">
            <h1>RS Bazar Admin Panel</h1>
            <div class="header-right">
                <span id="adminName">Admin</span>
                <button id="logoutBtn" class="btn-logout">Logout</button>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="admin-nav">
            <button class="nav-btn active" data-tab="dashboard">Dashboard</button>
            <button class="nav-btn" data-tab="products">Products</button>
            <button class="nav-btn" data-tab="sections">Sections</button>
            <button class="nav-btn" data-tab="orders">Orders</button>
            <button class="nav-btn" data-tab="settings">Settings</button>
                <button class="nav-btn" data-tab="users">Users</button>
        </nav>

        <!-- Dashboard Tab -->
        <div id="dashboardTab" class="tab-content">
            <section class="section-header">
                <h2>Dashboard Overview</h2>
                <div class="header-actions">
                    <button id="exportDataBtn" class="btn-primary">Export Data</button>
                    <button id="clearAllDataBtn" class="btn-secondary">Clear All Data</button>
                </div>
            </section>

            <div class="dashboard-grid">
                <div class="stat-card">
                    <h3>Total Products</h3>
                    <div class="stat-number" id="totalProducts">0</div>
                </div>
                <div class="stat-card">
                    <h3>Total Sections</h3>
                    <div class="stat-number" id="totalSections">0</div>
                </div>
                <div class="stat-card">
                    <h3>Total Orders</h3>
                    <div class="stat-number" id="totalOrders">0</div>
                </div>
                <div class="stat-card">
                    <h3>Total Revenue</h3>
                    <div class="stat-number" id="totalRevenue">Rs. 0</div>
                </div>
            </div>

            <div class="recent-orders">
                <h3>Recent Orders</h3>
                <div id="recentOrdersList"></div>
            </div>
        </div>

        <!-- Products Tab -->
        <div id="productsTab" class="tab-content hidden">
            <section class="section-header">
                <h2>Product Management</h2>
                <button id="addProductBtn" class="btn-primary">+ Add Product</button>
            </section>

            <div id="productsGrid" class="products-grid">
                <!-- Products will be loaded here -->
            </div>
        </div>

        <!-- Sections Tab -->
        <div id="sectionsTab" class="tab-content hidden">
            <section class="section-header">
                <h2>Section Management</h2>
                <button id="addSectionBtn" class="btn-primary">+ Add Section</button>
            </section>

            <div id="sectionsList" class="sections-list">
                <!-- Sections will be loaded here -->
            </div>
        </div>

        <!-- Orders Tab -->
        <div id="ordersTab" class="tab-content hidden">
            <section class="section-header">
                <h2>Order Management</h2>
                <button id="clearOrdersBtn" class="btn-secondary">Clear All Orders</button>
            </section>

            <div id="ordersListFull" class="orders-list-full">
                <!-- Orders will be loaded here -->
            </div>
        </div>

        <!-- Settings Tab -->
        <div id="settingsTab" class="tab-content hidden">
            <section class="section-header">
                <h2>System Settings</h2>
                <button id="saveSettingsBtn" class="btn-primary">Save Settings</button>
            </section>

            <div class="settings-container">
                <div class="setting-item">
                    <h3>Website Status</h3>
                    <div class="toggle">
                        <input type="checkbox" id="websiteStatus">
                        <label for="websiteStatus">Website Active</label>
                    </div>
                </div>

                <div class="setting-item">
                    <h3>Operating Hours</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Opening Time</label>
                            <input type="time" id="openingTime">
                        </div>
                        <div class="form-group">
                            <label>Closing Time</label>
                            <input type="time" id="closingTime">
                        </div>
                    </div>
                </div>

                <div class="setting-item">
                    <h3>Contact Information</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" id="contactEmail" placeholder="info@rsbazar.com">
                        </div>
                        <div class="form-group">
                            <label>Phone</label>
                            <input type="tel" id="contactPhone" placeholder="9802436393">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Users Tab -->
        <div id="usersTab" class="tab-content hidden">
            <section class="section-header">
                <h2>Stored Accounts</h2>
            </section>

            <div style="padding: 12px;">
                <div style="margin-bottom:12px;">
                    <button id="refreshUsersBtn" class="btn-primary">Refresh</button>
                    <button id="exportUsersBtn" class="btn-secondary">Export CSV</button>
                </div>
                <div id="usersList"></div>
            </div>
        </div>
    </div>

    <!-- Product Form Modal -->
    <div id="productFormContainer" class="form-container hidden">
        <div class="modal-overlay" onclick="hideProductForm()"></div>
        <div class="modal-content">
            <h3 id="formTitle">Add New Product</h3>
            <form id="productForm">
                <div class="form-row">
                    <div class="form-group">
                        <label>Product Name</label>
                        <input type="text" id="productName" required>
                    </div>
                    <div class="form-group">
                        <label>Section</label>
                        <select id="productSection" required></select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Image URL</label>
                        <input type="url" id="productImage" placeholder="https://example.com/image.jpg">
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="productDescription" rows="3"></textarea>
                    </div>
                </div>

                <div class="form-group">
                    <label>Packages (JSON format)</label>
                    <textarea id="productPackages" rows="8" placeholder='[
  {
    "id": "p1",
    "label": "100 Diamonds",
    "value": 50,
    "original": 80
  }
]'></textarea>
                </div>

                <div class="form-actions">
                    <button type="button" onclick="hideProductForm()" class="btn-secondary">Cancel</button>
                    <button type="submit" class="btn-primary">Save Product</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Section Form Modal -->
    <div id="sectionFormContainer" class="form-container hidden">
        <div class="modal-overlay" onclick="hideSectionForm()"></div>
        <div class="modal-content">
            <h3>Add New Section</h3>
            <form id="sectionForm">
                <div class="form-group">
                    <label>Section Name</label>
                    <input type="text" id="sectionName" required>
                </div>

                <div class="form-actions">
                    <button type="button" onclick="hideSectionForm()" class="btn-secondary">Cancel</button>
                    <button type="submit" class="btn-primary">Save Section</button>
                </div>
            </form>
        </div>
    </div>

    <!-- User Edit Modal -->
    <div id="userEditModal" class="form-container hidden">
        <div class="modal-overlay" onclick="hideUserModal()"></div>
        <div class="modal-content">
            <h3 id="userModalTitle">Edit User</h3>
            <form id="userEditForm">
                <div class="form-group">
                    <label>Username</label>
                    <input type="text" id="editUsername" required>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="editEmail">
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="text" id="editPassword">
                </div>
                <div class="form-actions">
                    <button type="button" onclick="hideUserModal()" class="btn-secondary">Cancel</button>
                    <button type="submit" class="btn-primary">Save User</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        (function(){
            try {
                const isAdmin = localStorage.getItem('isAdmin');
                if (isAdmin !== '1') {
                    window.location.href = 'login.html';
                }
            } catch (e) {
                console.warn('Redirect check failed', e);
                window.location.href = 'login.html';
            }
        })();
    </script>
    <script src="admin-script.js"></script>
</body>
</html>
